# Copy this file to `.env` and fill in the values.
# These settings are injected into the container at runtime.

# Function runtime
FUNCTIONS_WORKER_RUNTIME=python

# Storage (required by Azure Functions)
# When using docker-compose, this is overridden to use the bundled Azurite service.
AzureWebJobsStorage=

# HMAC secret for request validation (use Key Vault in prod)
HMAC_SECRET=

# Optional Key Vault-backed secret (managed identity in Azure)
KEY_VAULT_SECRET_URI=
KEY_VAULT_URL=
KEY_VAULT_SECRET_NAME=
KEY_VAULT_AUTH=managed

# Signature expectations
HMAC_HEADER=Authorization
HMAC_ALGO=sha256
SIGNATURE_FORMAT=hex
SIGNATURE_PREFIX=hmac 

# Challenge behavior
CHALLENGE_HMAC_REQUIRED=true
CHALLENGE_HASH_ENCODING=base64-hex

# Event Grid publishing
# If running locally, you likely want key auth. In Azure, prefer managed identity.
# You can also use a Service Principal by setting EVENT_GRID_AUTH=sp and providing credentials below.
EVENT_GRID_ENDPOINT=
EVENT_GRID_AUTH=key
EVENT_GRID_KEY=

# Namespace-only (optional)
EVENT_GRID_NAMESPACE_TOPIC=
EVENT_GRID_CLOUD_SOURCE=/osdu/relay

# Event type mapping
EVENT_TYPE_MODE=single
EVENT_TYPE_SINGLE=osdu.record.changed
EVENT_TYPE_BY_OP_CREATE=osdu.record.create
EVENT_TYPE_BY_OP_UPDATE=osdu.record.update
EVENT_TYPE_BY_OP_DELETE=osdu.record.delete

# Service Principal credentials (optional; used when *_AUTH=sp)
# Shared defaults (used for both Key Vault and Event Grid unless overridden per-service)
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=

# Per-service overrides (optional)
KEY_VAULT_TENANT_ID=
KEY_VAULT_CLIENT_ID=
KEY_VAULT_CLIENT_SECRET=
EVENT_GRID_TENANT_ID=
EVENT_GRID_CLIENT_ID=
EVENT_GRID_CLIENT_SECRET=
